<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.6//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_6.dtd'>
<nta>
	<declaration>// Place global declarations here.

broadcast chan a,b,c,start;

const int TAU = 200;

int flag = 0;

void step() {
    flag = (flag + 1 ) % 2;
}

</declaration>
	<template>
		<name x="5" y="5">Sender</name>
		<declaration>// Place local declarations here.

clock T;
clock x;
clock y;
double K;
double slope;

int loc = 0;

void update_K(double sl) {
    K = sl;
    slope = sl;
}


</declaration>
		<location id="id0" x="-382" y="-85">
			<name x="-450" y="-153">Loc1</name>
			<label kind="invariant" x="-467" y="-136">T'==K &amp;&amp; x &lt;= 1</label>
		</location>
		<location id="id1" x="-110" y="-17">
			<name x="-127" y="-1">Loc3</name>
			<label kind="invariant" x="-127" y="17">T'==K &amp;&amp; x &lt;= 1</label>
		</location>
		<location id="id2" x="-110" y="-102">
			<name x="-119" y="-153">Loc2</name>
			<label kind="invariant" x="-127" y="-136">T'==K &amp;&amp; x &lt;= 1</label>
		</location>
		<location id="id3" x="76" y="-51">
			<name x="59" y="-119">Loc4</name>
			<label kind="invariant" x="59" y="-102">T'==K &amp;&amp; x&lt;=1</label>
		</location>
		<location id="id4" x="-323" y="25">
			<committed/>
		</location>
		<location id="id5" x="-119" y="-229">
			<committed/>
		</location>
		<location id="id6" x="-102" y="144">
			<committed/>
		</location>
		<location id="id7" x="-399" y="25">
			<name x="-399" y="34">Initial</name>
			<committed/>
		</location>
		<location id="id8" x="272" y="-68">
			<name x="262" y="-102">Loc5</name>
			<label kind="invariant" x="262" y="-51">T' == K &amp;&amp; x &lt;= 1</label>
		</location>
		<location id="id9" x="85" y="85">
			<committed/>
		</location>
		<location id="id10" x="289" y="-229">
			<committed/>
		</location>
		<init ref="id7"/>
		<transition id="id11">
			<source ref="id10"/>
			<target ref="id8"/>
			<label kind="assignment" x="301" y="-131">x = 0</label>
			<nail x="331" y="-195"/>
		</transition>
		<transition id="id12">
			<source ref="id8"/>
			<target ref="id10"/>
			<label kind="guard" x="212" y="-238">x &gt;= 1</label>
			<label kind="assignment" x="239" y="-208">step()</label>
			<nail x="221" y="-187"/>
		</transition>
		<transition id="id13">
			<source ref="id9"/>
			<target ref="id3"/>
			<label kind="assignment" x="42" y="34">x = 0</label>
			<nail x="51" y="34"/>
		</transition>
		<transition id="id14">
			<source ref="id3"/>
			<target ref="id9"/>
			<label kind="guard" x="93" y="-17">x &gt;= 1</label>
			<label kind="assignment" x="97" y="-13">step()</label>
			<nail x="119" y="25"/>
		</transition>
		<transition id="id15">
			<source ref="id8"/>
			<target ref="id3"/>
			<label kind="guard" x="170" y="-59">y &gt; 10</label>
			<label kind="synchronisation" x="161" y="-42">a!</label>
			<label kind="assignment" x="144" y="-17">update_K(1),
loc = 4,
y = 0,
x = 0</label>
			<nail x="170" y="-17"/>
		</transition>
		<transition id="id16">
			<source ref="id3"/>
			<target ref="id8"/>
			<label kind="guard" x="94" y="-110">y &gt; 10</label>
			<label kind="synchronisation" x="161" y="-93">a!</label>
			<label kind="assignment" x="153" y="-161">update_K(2),
loc = 5,
y = 0,
x = 0</label>
			<nail x="170" y="-102"/>
		</transition>
		<transition id="id17">
			<source ref="id7"/>
			<target ref="id0"/>
			<label kind="synchronisation" x="-442" y="-42">start!</label>
			<label kind="assignment" x="-459" y="-25">update_K(1),
loc = 1,
x = 0,
y = 0,
T = 0</label>
		</transition>
		<transition id="id18">
			<source ref="id0"/>
			<target ref="id4"/>
			<label kind="guard" x="-289" y="-25">x &gt;= 1</label>
			<label kind="synchronisation" x="-364" y="-59">c!</label>
			<label kind="assignment" x="-364" y="-42">step()</label>
			<nail x="-280" y="0"/>
		</transition>
		<transition id="id19">
			<source ref="id6"/>
			<target ref="id1"/>
			<label kind="assignment" x="-51" y="85">x = 0</label>
			<nail x="-51" y="85"/>
		</transition>
		<transition id="id20">
			<source ref="id1"/>
			<target ref="id6"/>
			<label kind="guard" x="-152" y="76">x &gt;= 1</label>
			<label kind="assignment" x="-152" y="110">step()</label>
			<nail x="-170" y="76"/>
		</transition>
		<transition id="id21">
			<source ref="id5"/>
			<target ref="id2"/>
			<label kind="assignment" x="-204" y="-204">x = 0</label>
			<nail x="-161" y="-178"/>
		</transition>
		<transition id="id22">
			<source ref="id2"/>
			<target ref="id5"/>
			<label kind="guard" x="-76" y="-204">x &gt;= 1</label>
			<label kind="assignment" x="-84" y="-131">step()</label>
			<nail x="-59" y="-161"/>
		</transition>
		<transition id="id23">
			<source ref="id4"/>
			<target ref="id0"/>
			<label kind="assignment" x="-374" y="-34">x = 0</label>
			<nail x="-331" y="-34"/>
		</transition>
		<transition id="id24">
			<source ref="id1"/>
			<target ref="id3"/>
			<label kind="guard" x="-76" y="-59">y &gt; 10</label>
			<label kind="synchronisation" x="-25" y="-34">b!</label>
			<label kind="assignment" x="-51" y="-17">update_K(1),
loc = 4,
x = 0,
y = 0</label>
		</transition>
		<transition id="id25">
			<source ref="id2"/>
			<target ref="id3"/>
			<label kind="guard" x="-92" y="-114">y &gt; 10</label>
			<label kind="synchronisation" x="-25" y="-102">a!</label>
			<label kind="assignment" x="-42" y="-153">update_K(1),
loc = 4,
x = 0,
y = 0</label>
		</transition>
		<transition id="id26">
			<source ref="id0"/>
			<target ref="id1"/>
			<label kind="guard" x="-297" y="-59">y &gt; 10</label>
			<label kind="synchronisation" x="-204" y="-34">b!</label>
			<label kind="assignment" x="-238" y="-17">update_K(2),
loc = 3,
x = 0,
y = 0</label>
		</transition>
		<transition id="id27">
			<source ref="id0"/>
			<target ref="id2"/>
			<label kind="guard" x="-297" y="-110">y &gt; 10</label>
			<label kind="synchronisation" x="-195" y="-85">a!</label>
			<label kind="assignment" x="-238" y="-144">update_K(2),
loc = 2, 
x = 0,
y = 0</label>
		</transition>
	</template>
	<template>
		<name>Receiver</name>
		<location id="id28" x="0" y="0">
		</location>
		<location id="id29" x="0" y="76">
			<committed/>
		</location>
		<init ref="id29"/>
		<transition id="id30">
			<source ref="id28"/>
			<target ref="id28"/>
			<label kind="synchronisation" x="0" y="-76">c?</label>
			<nail x="34" y="-59"/>
			<nail x="-17" y="-59"/>
		</transition>
		<transition id="id31">
			<source ref="id29"/>
			<target ref="id28"/>
			<label kind="synchronisation" x="8" y="34">start?</label>
			<nail x="0" y="25"/>
		</transition>
		<transition id="id32">
			<source ref="id28"/>
			<target ref="id28"/>
			<label kind="synchronisation" x="-68" y="-8">b?</label>
			<nail x="-42" y="34"/>
			<nail x="-42" y="-34"/>
		</transition>
		<transition id="id33">
			<source ref="id28"/>
			<target ref="id28"/>
			<label kind="synchronisation" x="59" y="-8">a?</label>
			<nail x="51" y="34"/>
			<nail x="51" y="-34"/>
		</transition>
	</template>
	<system>// Place template instantiations here.
s = Sender();
r = Receiver();
// List one or more processes to be composed into a system.
system s,r;</system>
	<queries>
		<query>
			<formula/>
			<comment/>
		</query>
		<query>
			<formula>simulate[&lt;=TAU] {s.y, s.loc, s.T, flag, s.slope}</formula>
			<comment/>
			<result outcome="success" type="quality" timestamp="2025-09-03 17:25:53 +0200">
				<plot title="Simulations (1)" xaxis="time" yaxis="value">
					<series title="s.y" type="l" color="0xff0000" encoding="csv">0.0,0.0
10.525620693116785,10.525620693116785
10.525620693116785,0.0
20.920672693204992,10.395052000088207
20.920672693204992,0.0
31.714660862116258,10.793988168911266
31.714660862116258,0.0
41.76978641878318,10.055125556666917
41.76978641878318,0.0
51.81454700061153,10.044760581828356
51.81454700061153,0.0
61.90617319861959,10.09162619800806
61.90617319861959,0.0
72.68790621462286,10.781733016003262
72.68790621462286,0.0
82.98218483886481,10.29427862424195
82.98218483886481,0.0
93.34169952019636,10.359514681331548
93.34169952019636,0.0
104.22292913631824,10.881229616121882
104.22292913631824,0.0
114.41635648633275,10.193427350014495
114.41635648633275,0.0
125.12280420179884,10.706447715466096
125.12280420179884,0.0
135.81499987907227,10.692195677273443
135.81499987907227,0.0
146.40154138757734,10.586541508505071
146.40154138757734,0.0
157.12035761909624,10.718816231518908
157.12035761909624,0.0
167.77367446742295,10.653316848326705
167.77367446742295,0.0
178.47856620666553,10.704891739242589
178.47856620666553,0.0
189.44986395484827,10.971297748182732
189.44986395484827,0.0
199.5278101083084,10.077946153460115
199.5278101083084,0.0
200.0,0.4721898916916132
					</series>
					<series title="s.loc" type="l" color="0xccff00" encoding="csv">0.0,0.0
0.0,1.0
10.525620693116785,1.0
10.525620693116785,2.0
20.920672693204992,2.0
20.920672693204992,4.0
31.714660862116258,4.0
31.714660862116258,5.0
41.76978641878318,5.0
41.76978641878318,4.0
51.81454700061153,4.0
51.81454700061153,5.0
61.90617319861959,5.0
61.90617319861959,4.0
72.68790621462286,4.0
72.68790621462286,5.0
82.98218483886481,5.0
82.98218483886481,4.0
93.34169952019636,4.0
93.34169952019636,5.0
104.22292913631824,5.0
104.22292913631824,4.0
114.41635648633275,4.0
114.41635648633275,5.0
125.12280420179884,5.0
125.12280420179884,4.0
135.81499987907227,4.0
135.81499987907227,5.0
146.40154138757734,5.0
146.40154138757734,4.0
157.12035761909624,4.0
157.12035761909624,5.0
167.77367446742295,5.0
167.77367446742295,4.0
178.47856620666553,4.0
178.47856620666553,5.0
189.44986395484827,5.0
189.44986395484827,4.0
199.5278101083084,4.0
199.5278101083084,5.0
200.0,5.0
					</series>
					<series title="s.T" type="l" color="0x00ff66" encoding="csv">0.0,0.0
10.525620693116785,10.525620693116785
20.920672693204992,31.3157246932932
31.714660862116258,42.10971286220447
41.76978641878318,62.219963975538306
51.81454700061153,72.26472455736666
61.90617319861959,92.44797695338278
72.68790621462286,103.22970996938604
82.98218483886481,123.81826721786993
93.34169952019636,134.17778189920148
104.22292913631824,155.94024113144525
114.41635648633275,166.13366848145975
125.12280420179884,187.54656391239195
135.81499987907227,198.2387595896654
146.40154138757734,219.41184260667555
157.12035761909624,230.13065883819445
167.77367446742295,251.43729253484787
178.47856620666553,262.1421842740905
189.44986395484827,284.08477977045595
199.5278101083084,294.16272592391607
200.0,295.1071057072993
					</series>
					<series title="flag" type="l" color="0x0066ff" encoding="csv">0.0,0.0
1.0,0.0
1.0,1.0
2.0,1.0
2.0,0.0
3.0,0.0
3.0,1.0
4.0,1.0
4.0,0.0
5.0,0.0
5.0,1.0
6.0,1.0
6.0,0.0
7.0,0.0
7.0,1.0
8.0,1.0
8.0,0.0
9.0,0.0
9.0,1.0
10.0,1.0
10.0,0.0
11.525620693116785,0.0
11.525620693116785,1.0
12.525620693116785,1.0
12.525620693116785,0.0
13.525620693116785,0.0
13.525620693116785,1.0
14.525620693116785,1.0
14.525620693116785,0.0
15.525620693116785,0.0
15.525620693116785,1.0
16.525620693116785,1.0
16.525620693116785,0.0
17.525620693116785,0.0
17.525620693116785,1.0
18.525620693116785,1.0
18.525620693116785,0.0
19.525620693116785,0.0
19.525620693116785,1.0
20.525620693116785,1.0
20.525620693116785,0.0
21.920672693204992,0.0
21.920672693204992,1.0
22.920672693204992,1.0
22.920672693204992,0.0
23.920672693204992,0.0
23.920672693204992,1.0
24.920672693204992,1.0
24.920672693204992,0.0
25.920672693204992,0.0
25.920672693204992,1.0
26.920672693204992,1.0
26.920672693204992,0.0
27.920672693204992,0.0
27.920672693204992,1.0
28.920672693204992,1.0
28.920672693204992,0.0
29.920672693204992,0.0
29.920672693204992,1.0
30.920672693204992,1.0
30.920672693204992,0.0
32.71466086211626,0.0
32.71466086211626,1.0
33.71466086211626,1.0
33.71466086211626,0.0
34.71466086211626,0.0
34.71466086211626,1.0
35.71466086211626,1.0
35.71466086211626,0.0
36.71466086211626,0.0
36.71466086211626,1.0
37.71466086211626,1.0
37.71466086211626,0.0
38.71466086211626,0.0
38.71466086211626,1.0
39.71466086211626,1.0
39.71466086211626,0.0
40.71466086211626,0.0
40.71466086211626,1.0
41.71466086211626,1.0
41.71466086211626,0.0
42.76978641878318,0.0
42.76978641878318,1.0
43.76978641878318,1.0
43.76978641878318,0.0
44.76978641878318,0.0
44.76978641878318,1.0
45.76978641878318,1.0
45.76978641878318,0.0
46.76978641878318,0.0
46.76978641878318,1.0
47.76978641878318,1.0
47.76978641878318,0.0
48.76978641878318,0.0
48.76978641878318,1.0
49.76978641878318,1.0
49.76978641878318,0.0
50.76978641878318,0.0
50.76978641878318,1.0
51.76978641878318,1.0
51.81454700061153,0.0
52.81454700061153,0.0
52.81454700061153,1.0
53.81454700061153,1.0
53.81454700061153,0.0
54.81454700061153,0.0
54.81454700061153,1.0
55.81454700061153,1.0
55.81454700061153,0.0
56.81454700061153,0.0
56.81454700061153,1.0
57.81454700061153,1.0
57.81454700061153,0.0
58.81454700061153,0.0
58.81454700061153,1.0
59.81454700061153,1.0
59.81454700061153,0.0
60.81454700061153,0.0
60.81454700061153,1.0
61.81454700061153,1.0
61.81454700061153,0.0
62.90617319861959,0.0
62.90617319861959,1.0
63.90617319861959,1.0
63.90617319861959,0.0
64.9061731986196,0.0
64.9061731986196,1.0
65.9061731986196,1.0
65.9061731986196,0.0
66.9061731986196,0.0
66.9061731986196,1.0
67.9061731986196,1.0
67.9061731986196,0.0
68.9061731986196,0.0
68.9061731986196,1.0
69.9061731986196,1.0
69.9061731986196,0.0
70.9061731986196,0.0
70.9061731986196,1.0
71.9061731986196,1.0
71.9061731986196,0.0
73.68790621462286,0.0
73.68790621462286,1.0
74.68790621462286,1.0
74.68790621462286,0.0
75.68790621462286,0.0
75.68790621462286,1.0
76.68790621462286,1.0
76.68790621462286,0.0
77.68790621462286,0.0
77.68790621462286,1.0
78.68790621462286,1.0
78.68790621462286,0.0
79.68790621462286,0.0
79.68790621462286,1.0
80.68790621462286,1.0
80.68790621462286,0.0
81.68790621462286,0.0
81.68790621462286,1.0
82.68790621462286,1.0
82.68790621462286,0.0
83.98218483886481,0.0
83.98218483886481,1.0
84.98218483886481,1.0
84.98218483886481,0.0
85.98218483886481,0.0
85.98218483886481,1.0
86.98218483886481,1.0
86.98218483886481,0.0
87.98218483886481,0.0
87.98218483886481,1.0
88.98218483886481,1.0
88.98218483886481,0.0
89.98218483886481,0.0
89.98218483886481,1.0
90.98218483886481,1.0
90.98218483886481,0.0
91.98218483886481,0.0
91.98218483886481,1.0
92.98218483886481,1.0
92.98218483886481,0.0
94.34169952019636,0.0
94.34169952019636,1.0
95.34169952019636,1.0
95.34169952019636,0.0
96.34169952019636,0.0
96.34169952019636,1.0
97.34169952019636,1.0
97.34169952019636,0.0
98.34169952019636,0.0
98.34169952019636,1.0
99.34169952019636,1.0
99.34169952019636,0.0
100.34169952019636,0.0
100.34169952019636,1.0
101.34169952019636,1.0
101.34169952019636,0.0
102.34169952019636,0.0
102.34169952019636,1.0
103.34169952019636,1.0
103.34169952019636,0.0
105.22292913631824,0.0
105.22292913631824,1.0
106.22292913631824,1.0
106.22292913631824,0.0
107.22292913631824,0.0
107.22292913631824,1.0
108.22292913631824,1.0
108.22292913631824,0.0
109.22292913631824,0.0
109.22292913631824,1.0
110.22292913631824,1.0
110.22292913631824,0.0
111.22292913631824,0.0
111.22292913631824,1.0
112.22292913631824,1.0
112.22292913631824,0.0
113.22292913631824,0.0
113.22292913631824,1.0
114.22292913631824,1.0
114.22292913631824,0.0
115.41635648633275,0.0
115.41635648633275,1.0
116.41635648633275,1.0
116.41635648633275,0.0
117.41635648633275,0.0
117.41635648633275,1.0
118.41635648633275,1.0
118.41635648633275,0.0
119.41635648633275,0.0
119.41635648633275,1.0
120.41635648633275,1.0
120.41635648633275,0.0
121.41635648633275,0.0
121.41635648633275,1.0
122.41635648633275,1.0
122.41635648633275,0.0
123.41635648633275,0.0
123.41635648633275,1.0
124.41635648633275,1.0
124.41635648633275,0.0
126.12280420179884,0.0
126.12280420179884,1.0
127.12280420179884,1.0
127.12280420179884,0.0
128.12280420179883,0.0
128.12280420179883,1.0
129.12280420179883,1.0
129.12280420179883,0.0
130.12280420179883,0.0
130.12280420179883,1.0
131.12280420179883,1.0
131.12280420179883,0.0
132.12280420179883,0.0
132.12280420179883,1.0
133.12280420179883,1.0
133.12280420179883,0.0
134.12280420179883,0.0
134.12280420179883,1.0
135.12280420179883,1.0
135.12280420179883,0.0
136.81499987907227,0.0
136.81499987907227,1.0
137.81499987907227,1.0
137.81499987907227,0.0
138.81499987907227,0.0
138.81499987907227,1.0
139.81499987907227,1.0
139.81499987907227,0.0
140.81499987907227,0.0
140.81499987907227,1.0
141.81499987907227,1.0
141.81499987907227,0.0
142.81499987907227,0.0
142.81499987907227,1.0
143.81499987907227,1.0
143.81499987907227,0.0
144.81499987907227,0.0
144.81499987907227,1.0
145.81499987907227,1.0
145.81499987907227,0.0
147.40154138757734,0.0
147.40154138757734,1.0
148.40154138757734,1.0
148.40154138757734,0.0
149.40154138757734,0.0
149.40154138757734,1.0
150.40154138757734,1.0
150.40154138757734,0.0
151.40154138757734,0.0
151.40154138757734,1.0
152.40154138757734,1.0
152.40154138757734,0.0
153.40154138757734,0.0
153.40154138757734,1.0
154.40154138757734,1.0
154.40154138757734,0.0
155.40154138757734,0.0
155.40154138757734,1.0
156.40154138757734,1.0
156.40154138757734,0.0
158.12035761909624,0.0
158.12035761909624,1.0
159.12035761909624,1.0
159.12035761909624,0.0
160.12035761909624,0.0
160.12035761909624,1.0
161.12035761909624,1.0
161.12035761909624,0.0
162.12035761909624,0.0
162.12035761909624,1.0
163.12035761909624,1.0
163.12035761909624,0.0
164.12035761909624,0.0
164.12035761909624,1.0
165.12035761909624,1.0
165.12035761909624,0.0
166.12035761909624,0.0
166.12035761909624,1.0
167.12035761909624,1.0
167.12035761909624,0.0
168.77367446742295,0.0
168.77367446742295,1.0
169.77367446742295,1.0
169.77367446742295,0.0
170.77367446742295,0.0
170.77367446742295,1.0
171.77367446742295,1.0
171.77367446742295,0.0
172.77367446742295,0.0
172.77367446742295,1.0
173.77367446742295,1.0
173.77367446742295,0.0
174.77367446742295,0.0
174.77367446742295,1.0
175.77367446742295,1.0
175.77367446742295,0.0
176.77367446742295,0.0
176.77367446742295,1.0
177.77367446742295,1.0
177.77367446742295,0.0
179.47856620666553,0.0
179.47856620666553,1.0
180.47856620666553,1.0
180.47856620666553,0.0
181.47856620666553,0.0
181.47856620666553,1.0
182.47856620666553,1.0
182.47856620666553,0.0
183.47856620666553,0.0
183.47856620666553,1.0
184.47856620666553,1.0
184.47856620666553,0.0
185.47856620666553,0.0
185.47856620666553,1.0
186.47856620666553,1.0
186.47856620666553,0.0
187.47856620666553,0.0
187.47856620666553,1.0
188.47856620666553,1.0
188.47856620666553,0.0
190.44986395484827,0.0
190.44986395484827,1.0
191.44986395484827,1.0
191.44986395484827,0.0
192.44986395484827,0.0
192.44986395484827,1.0
193.44986395484827,1.0
193.44986395484827,0.0
194.44986395484827,0.0
194.44986395484827,1.0
195.44986395484827,1.0
195.44986395484827,0.0
196.44986395484827,0.0
196.44986395484827,1.0
197.44986395484827,1.0
197.44986395484827,0.0
198.44986395484827,0.0
198.44986395484827,1.0
199.44986395484827,1.0
199.44986395484827,0.0
200.0,0.0
					</series>
					<series title="s.slope" type="l" color="0xcc00ff" encoding="csv">0.0,0.0
0.0,1.0
10.525620693116785,1.0
10.525620693116785,2.0
20.920672693204992,2.0
20.920672693204992,1.0
31.714660862116258,1.0
31.714660862116258,2.0
41.76978641878318,2.0
41.76978641878318,1.0
51.81454700061153,1.0
51.81454700061153,2.0
61.90617319861959,2.0
61.90617319861959,1.0
72.68790621462286,1.0
72.68790621462286,2.0
82.98218483886481,2.0
82.98218483886481,1.0
93.34169952019636,1.0
93.34169952019636,2.0
104.22292913631824,2.0
104.22292913631824,1.0
114.41635648633275,1.0
114.41635648633275,2.0
125.12280420179884,2.0
125.12280420179884,1.0
135.81499987907227,1.0
135.81499987907227,2.0
146.40154138757734,2.0
146.40154138757734,1.0
157.12035761909624,1.0
157.12035761909624,2.0
167.77367446742295,2.0
167.77367446742295,1.0
178.47856620666553,1.0
178.47856620666553,2.0
189.44986395484827,2.0
189.44986395484827,1.0
199.5278101083084,1.0
199.5278101083084,2.0
200.0,2.0
					</series>
					<comment/>
				</plot>
			</result>
		</query>
	</queries>
</nta>
